!function(h){window.fkblk=new function(a){var o,r,i,e=this,t=0,n=0,s=!1,l=new Audio(a.hit),u=!1,f=h("#fkblk-visualizer"),c=(f.find(".bar"),f.find(".beat")),d=h("#fkblk-pad"),k=h(".fkblk-results"),b=h("#fkblk-unblock-start");function v(){n=t=0}b.on("click",function(t){if(b.hide(),k.hide(),!u)return t.preventDefault(),e.start(a.bars,a.bpm),!1}),d.on("mousedown",function(){var t=h(this);l.play(),t.addClass("hit"),s?(n++,t.addClass("okay")):t.addClass("nope"),setTimeout(function(){t.removeClass("hit okay nope")},350)}),this.start=function(t,e){var n=3,o=d.find(".text").text();countDown=setInterval(function(){0===n?(d.find(".text").text(o),startMetronome(a.bars,a.bpm),clearInterval(countDown)):d.find(".text").text(n),n--},getIntervalDelay(t,e))},startMetronome=function(t,e){v();var n=getIntervalDelay(t,e);o=setInterval(function(){s=!0},n),setTimeout(function(){i=setInterval(doBeat,n)},200),setTimeout(function(){r=setInterval(function(){s=!1},n)},400)},stopMetronome=function(){s=!1,clearInterval(i),clearInterval(o),clearInterval(r),h("#fkblk-hits-good").text(n),h("#fkblk-hits-total").text(t-1),k.show(),(u=n===t-1)?(k.append("You are being un-fakeblocked..."),setTimeout(function(){h("#fkblk-unblock-start").trigger("click")},1e3)):b.show(),v()},doBeat=function(){c.removeClass("hit"),++t>getTotalBeats(a.bars)?stopMetronome():c.eq(t-1).addClass("hit")},getIntervalDelay=function(t,e){return getSecondsPerBar(e)/4*1e3},getSecondsPerBar=function(t){return 4/t*60},getTotalBeats=function(t){return 4*t}}(fkblk)}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZrYmxrLmpzIl0sIm5hbWVzIjpbIiQiLCJ3aW5kb3ciLCJma2JsayIsInNldHRpbmdzIiwiY291bnRzT24iLCJjb3VudHNPZmYiLCJtZXRyb25vbWUiLCJzZWxmIiwidGhpcyIsInBhc3NlZEJlYXRzIiwiZ29vZEJlYXRzIiwiZG9lc0JlYXRDb3VudCIsImF1ZGlvIiwiQXVkaW8iLCJoaXQiLCJwYXNzZWQiLCIkdmlzdWFsaXplciIsIiRiZWF0cyIsImZpbmQiLCIkcGFkIiwiJHJlc3VsdHMiLCIkc3RhcnQiLCJyZXNldFRyYWNrZXJzIiwib24iLCJlIiwiaGlkZSIsInByZXZlbnREZWZhdWx0Iiwic3RhcnQiLCJiYXJzIiwiYnBtIiwiJHRoaXMiLCJwbGF5IiwiYWRkQ2xhc3MiLCJzZXRUaW1lb3V0IiwicmVtb3ZlQ2xhc3MiLCJpIiwib3JpZ25hbFRleHQiLCJ0ZXh0IiwiY291bnREb3duIiwic2V0SW50ZXJ2YWwiLCJzdGFydE1ldHJvbm9tZSIsImNsZWFySW50ZXJ2YWwiLCJnZXRJbnRlcnZhbERlbGF5IiwiaW50ZXJ2YWxEZWxheSIsImRvQmVhdCIsInRvbGVyYW5jZSIsInN0b3BNZXRyb25vbWUiLCJzaG93IiwiYXBwZW5kIiwidHJpZ2dlciIsImdldFRvdGFsQmVhdHMiLCJlcSIsImdldFNlY29uZHNQZXJCYXIiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJDQUtDLFNBQVlBLEdBcUxaQyxPQUFPQyxNQUFRLElBbkxDLFNBQVVDLEdBRXpCLElBUUNDLEVBQVVDLEVBQVdDLEVBUmxCQyxFQUFPQyxLQUVWQyxFQUFjLEVBRWRDLEVBQVksRUFDWkMsR0FBZ0IsRUFDaEJDLEVBQVEsSUFBSUMsTUFBT1YsRUFBU1csS0FDNUJDLEdBQVMsRUFHTkMsRUFBY2hCLEVBQUcscUJBRXBCaUIsR0FEUUQsRUFBWUUsS0FBTSxRQUNqQkYsRUFBWUUsS0FBTSxVQUMzQkMsRUFBT25CLEVBQUcsY0FDVm9CLEVBQVdwQixFQUFHLGtCQUNkcUIsRUFBU3JCLEVBQUcsd0JBcUNiLFNBQVNzQixJQUVSWixFQURBRCxFQUFjLEVBcENmWSxFQUFPRSxHQUFJLFFBQVMsU0FBVUMsR0FLN0IsR0FIQUgsRUFBT0ksT0FDUEwsRUFBU0ssUUFFRlYsRUFHTixPQUZBUyxFQUFFRSxpQkFDRm5CLEVBQUtvQixNQUFPeEIsRUFBU3lCLEtBQU16QixFQUFTMEIsTUFDN0IsSUFLVFYsRUFBS0ksR0FBSSxZQUFhLFdBRXJCLElBQUlPLEVBQVE5QixFQUFHUSxNQUVmSSxFQUFNbUIsT0FFTkQsRUFBTUUsU0FBVSxPQUVYckIsR0FDSkQsSUFDQW9CLEVBQU1FLFNBQVUsU0FHaEJGLEVBQU1FLFNBQVUsUUFHakJDLFdBQVksV0FDWEgsRUFBTUksWUFBYSxrQkFDakIsT0FtQ0oxQixLQUFLbUIsTUFBUSxTQUFVQyxFQUFNQyxHQUU1QixJQUFJTSxFQUFJLEVBQ1BDLEVBQWNqQixFQUFLRCxLQUFNLFNBQVVtQixPQUdwQ0MsVUFBWUMsWUFBYSxXQUVuQixJQUFNSixHQUNWaEIsRUFBS0QsS0FBTSxTQUFVbUIsS0FBTUQsR0FDM0JJLGVBQWdCckMsRUFBU3lCLEtBQU16QixFQUFTMEIsS0FDeENZLGNBQWVILFlBRWZuQixFQUFLRCxLQUFNLFNBQVVtQixLQUFNRixHQUc1QkEsS0FFRU8saUJBQWtCZCxFQUFNQyxLQUk1QlcsZUFBaUIsU0FBVVosRUFBTUMsR0FFaENQLElBRUEsSUFBSXFCLEVBQWdCRCxpQkFBa0JkLEVBQU1DLEdBRzVDekIsRUFBV21DLFlBQWEsV0FDdkI1QixHQUFnQixHQUNkZ0MsR0FHSFYsV0FBWSxXQUNYM0IsRUFBWWlDLFlBQWFLLE9BQVFELElBQy9CRSxLQUdIWixXQUFZLFdBRVg1QixFQUFZa0MsWUFBYSxXQUN4QjVCLEdBQWdCLEdBQ2RnQyxJQTdIUSxNQW1JYkcsY0FBZ0IsV0FFZm5DLEdBQWdCLEVBQ2hCOEIsY0FBZW5DLEdBQ2ZtQyxjQUFlckMsR0FDZnFDLGNBQWVwQyxHQTdFZkwsRUFBRyxvQkFBcUJxQyxLQUFNM0IsR0FDOUJWLEVBQUcscUJBQXNCcUMsS0FBTTVCLEVBQWMsR0FFN0NXLEVBQVMyQixRQUVUaEMsRUFBV0wsSUFBZ0JELEVBQWMsSUFJeENXLEVBQVM0QixPQUFRLG1DQUVqQmYsV0FBWSxXQUNYakMsRUFBRyx3QkFBeUJpRCxRQUFTLFVBQ25DLE1BSUg1QixFQUFPMEIsT0FnRVJ6QixLQUlEc0IsT0FBUyxXQUVSM0IsRUFBT2lCLFlBQWEsU0FDcEJ6QixFQUVtQnlDLGNBQWUvQyxFQUFTeUIsTUFDMUNrQixnQkFJRDdCLEVBQU9rQyxHQUFJMUMsRUFBYyxHQUFJdUIsU0FBVSxRQUl4Q1UsaUJBQW1CLFNBQVVkLEVBQU1DLEdBRWxDLE9BQVN1QixpQkFBa0J2QixHQUFRLEVBQU0sS0FJMUN1QixpQkFBbUIsU0FBVXZCLEdBRTVCLE9BQVMsRUFBSUEsRUFBUSxJQUl0QnFCLGNBQWdCLFNBQVV0QixHQUN6QixPQUFPLEVBQUlBLEdBS0UsQ0FBZTFCLE9Bckw5QixDQXVMSW1EIiwiZmlsZSI6ImZrYmxrLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRnJvbnRlbmQgSlNcbiAqIEBzaW5jZSAgICAxLjAuMFxuICogQHZlcnNpb24gIDEuMC4wXG4gKi9cbjsoIGZ1bmN0aW9uKCAkICkge1xuXG5cdHZhciBGYWtlYmxvY2sgPSBmdW5jdGlvbiggc2V0dGluZ3MgKSB7XG5cblx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHR0b2xlcmFuY2UgPSA0MDAsXG5cdFx0XHRwYXNzZWRCZWF0cyA9IDAsXG5cdFx0XHRiYWRCZWF0cyA9IDAsXG5cdFx0XHRnb29kQmVhdHMgPSAwLFxuXHRcdFx0ZG9lc0JlYXRDb3VudCA9IGZhbHNlLFxuXHRcdFx0YXVkaW8gPSBuZXcgQXVkaW8oIHNldHRpbmdzLmhpdCApLFxuXHRcdFx0cGFzc2VkID0gZmFsc2UsXG5cdFx0XHRjb3VudHNPbiwgY291bnRzT2ZmLCBtZXRyb25vbWU7XG5cblx0XHR2YXIgJHZpc3VhbGl6ZXIgPSAkKCAnI2ZrYmxrLXZpc3VhbGl6ZXInICksXG5cdFx0XHQkYmFycyA9ICR2aXN1YWxpemVyLmZpbmQoICcuYmFyJyApLFxuXHRcdFx0JGJlYXRzID0gJHZpc3VhbGl6ZXIuZmluZCggJy5iZWF0JyApLFxuXHRcdFx0JHBhZCA9ICQoICcjZmtibGstcGFkJyApLFxuXHRcdFx0JHJlc3VsdHMgPSAkKCAnLmZrYmxrLXJlc3VsdHMnICksXG5cdFx0XHQkc3RhcnQgPSAkKCAnI2ZrYmxrLXVuYmxvY2stc3RhcnQnICk7XG5cblx0XHQkc3RhcnQub24oICdjbGljaycsIGZ1bmN0aW9uKCBlICkge1xuXG5cdFx0XHQkc3RhcnQuaGlkZSgpO1xuXHRcdFx0JHJlc3VsdHMuaGlkZSgpO1xuXG5cdFx0XHRpZiAoICEgcGFzc2VkICkge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdHNlbGYuc3RhcnQoIHNldHRpbmdzLmJhcnMsIHNldHRpbmdzLmJwbSApO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHR9ICk7XG5cblx0XHQkcGFkLm9uKCAnbW91c2Vkb3duJywgZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciAkdGhpcyA9ICQoIHRoaXMgKTtcblxuXHRcdFx0YXVkaW8ucGxheSgpO1xuXG5cdFx0XHQkdGhpcy5hZGRDbGFzcyggJ2hpdCcgKTtcblxuXHRcdFx0aWYgKCBkb2VzQmVhdENvdW50ICkge1xuXHRcdFx0XHRnb29kQmVhdHMrKztcblx0XHRcdFx0JHRoaXMuYWRkQ2xhc3MoICdva2F5JyApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YmFkQmVhdHMrKztcblx0XHRcdFx0JHRoaXMuYWRkQ2xhc3MoICdub3BlJyApO1xuXHRcdFx0fVxuXG5cdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0JHRoaXMucmVtb3ZlQ2xhc3MoICdoaXQgb2theSBub3BlJyApO1xuXHRcdFx0fSwgMzUwICk7XG5cblx0XHR9ICk7XG5cblx0XHRmdW5jdGlvbiByZXNldFRyYWNrZXJzKCkge1xuXHRcdFx0cGFzc2VkQmVhdHMgPSAwO1xuXHRcdFx0Z29vZEJlYXRzID0gMDtcblx0XHRcdGJhZEJlYXRzID0gMDtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiByZXBvcnRSZXN1bHRzKCkge1xuXG5cdFx0XHQkKCAnI2ZrYmxrLWhpdHMtZ29vZCcgKS50ZXh0KCBnb29kQmVhdHMgKTtcblx0XHRcdCQoICcjZmtibGstaGl0cy10b3RhbCcgKS50ZXh0KCBwYXNzZWRCZWF0cyAtIDEgKTtcblxuXHRcdFx0JHJlc3VsdHMuc2hvdygpO1xuXG5cdFx0XHRwYXNzZWQgPSAoIGdvb2RCZWF0cyA9PT0gKCBwYXNzZWRCZWF0cyAtIDEgKSApO1xuXG5cdFx0XHRpZiAoIHBhc3NlZCApIHtcblxuXHRcdFx0XHQkcmVzdWx0cy5hcHBlbmQoICdZb3UgYXJlIGJlaW5nIHVuLWZha2VibG9ja2VkLi4uJyApO1xuXG5cdFx0XHRcdHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCQoICcjZmtibGstdW5ibG9jay1zdGFydCcgKS50cmlnZ2VyKCAnY2xpY2snICk7XG5cdFx0XHRcdH0sIDEwMDAgKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHQkc3RhcnQuc2hvdygpO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHR0aGlzLnN0YXJ0ID0gZnVuY3Rpb24oIGJhcnMsIGJwbSApIHtcblxuXHRcdFx0dmFyIGkgPSAzLFxuXHRcdFx0XHRvcmlnbmFsVGV4dCA9ICRwYWQuZmluZCggJy50ZXh0JyApLnRleHQoKSxcblx0XHRcdFx0Y291bnRkb3duO1xuXG5cdFx0XHRjb3VudERvd24gPSBzZXRJbnRlcnZhbCggZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0aWYgKCAwID09PSBpICkge1xuXHRcdFx0XHRcdCRwYWQuZmluZCggJy50ZXh0JyApLnRleHQoIG9yaWduYWxUZXh0ICk7XG5cdFx0XHRcdFx0c3RhcnRNZXRyb25vbWUoIHNldHRpbmdzLmJhcnMsIHNldHRpbmdzLmJwbSApO1xuXHRcdFx0XHRcdGNsZWFySW50ZXJ2YWwoIGNvdW50RG93biApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRwYWQuZmluZCggJy50ZXh0JyApLnRleHQoIGkgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGktLTtcblxuXHRcdFx0fSwgZ2V0SW50ZXJ2YWxEZWxheSggYmFycywgYnBtICkgKTtcblxuXHRcdH1cblxuXHRcdHN0YXJ0TWV0cm9ub21lID0gZnVuY3Rpb24oIGJhcnMsIGJwbSApIHtcblxuXHRcdFx0cmVzZXRUcmFja2VycygpO1xuXG5cdFx0XHR2YXIgaW50ZXJ2YWxEZWxheSA9IGdldEludGVydmFsRGVsYXkoIGJhcnMsIGJwbSApO1xuXG5cdFx0XHQvLyBTdGFydCBpbW1lZGlhdGVseVxuXHRcdFx0Y291bnRzT24gPSBzZXRJbnRlcnZhbCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGRvZXNCZWF0Q291bnQgPSB0cnVlO1xuXHRcdFx0fSwgaW50ZXJ2YWxEZWxheSApO1xuXG5cdFx0XHQvLyBzdGFydCBoYWxmIHRvbGVyYW5jZSBhZnRlclxuXHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdG1ldHJvbm9tZSA9IHNldEludGVydmFsKCBkb0JlYXQsIGludGVydmFsRGVsYXkgKTtcblx0XHRcdH0sIHRvbGVyYW5jZSAvIDIgKTtcblxuXHRcdFx0Ly8gc3RhcnQgYWZ0ZXJcblx0XHRcdHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdGNvdW50c09mZiA9IHNldEludGVydmFsKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRkb2VzQmVhdENvdW50ID0gZmFsc2U7XG5cdFx0XHRcdH0sIGludGVydmFsRGVsYXkgKTtcblxuXHRcdFx0fSwgdG9sZXJhbmNlICk7XG5cblx0XHR9O1xuXG5cdFx0c3RvcE1ldHJvbm9tZSA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRkb2VzQmVhdENvdW50ID0gZmFsc2U7XG5cdFx0XHRjbGVhckludGVydmFsKCBtZXRyb25vbWUgKTtcblx0XHRcdGNsZWFySW50ZXJ2YWwoIGNvdW50c09uICk7XG5cdFx0XHRjbGVhckludGVydmFsKCBjb3VudHNPZmYgKTtcblxuXHRcdFx0cmVwb3J0UmVzdWx0cygpO1xuXG5cdFx0XHRyZXNldFRyYWNrZXJzKCk7XG5cblx0XHR9XG5cblx0XHRkb0JlYXQgPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0JGJlYXRzLnJlbW92ZUNsYXNzKCAnaGl0JyApO1xuXHRcdFx0cGFzc2VkQmVhdHMrKztcblxuXHRcdFx0aWYgKCBwYXNzZWRCZWF0cyA+IGdldFRvdGFsQmVhdHMoIHNldHRpbmdzLmJhcnMgKSApIHtcblx0XHRcdFx0c3RvcE1ldHJvbm9tZSgpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdCRiZWF0cy5lcSggcGFzc2VkQmVhdHMgLSAxICkuYWRkQ2xhc3MoICdoaXQnICk7XG5cblx0XHR9O1xuXG5cdFx0Z2V0SW50ZXJ2YWxEZWxheSA9IGZ1bmN0aW9uKCBiYXJzLCBicG0gKSB7XG5cblx0XHRcdHJldHVybiAoIGdldFNlY29uZHNQZXJCYXIoIGJwbSApIC8gNCApICogMTAwMDtcblxuXHRcdH07XG5cblx0XHRnZXRTZWNvbmRzUGVyQmFyID0gZnVuY3Rpb24oIGJwbSApIHtcblxuXHRcdFx0cmV0dXJuICggNCAvIGJwbSApICogNjA7XG5cblx0XHR9O1xuXG5cdFx0Z2V0VG90YWxCZWF0cyA9IGZ1bmN0aW9uKCBiYXJzICkge1xuXHRcdFx0cmV0dXJuIDQgKiBiYXJzO1xuXHRcdH1cblxuXHR9O1xuXG5cdHdpbmRvdy5ma2JsayA9IG5ldyBGYWtlYmxvY2soIGZrYmxrICk7XG5cbn0gKSggalF1ZXJ5ICk7XG4iXX0=
